diff --git a/source/fitz/filter-jbig2.c b/source/fitz/filter-jbig2.c
--- a/source/fitz/filter-jbig2.c
+++ b/source/fitz/filter-jbig2.c
@@ -334,15 +334,14 @@ next_jbig2d(fz_context *ctx, fz_stream *stm, size_t len)
 	return *stm->rp++;
 }
 
-static int
-error_callback(void *data, const char *msg, Jbig2Severity severity, int32_t seg_idx)
+static void
+error_callback(void *data, const char *msg, Jbig2Severity severity, uint32_t seg_idx)
 {
 	fz_context *ctx = data;
 	if (severity == JBIG2_SEVERITY_FATAL)
-		fz_warn(ctx, "jbig2dec error: %s (segment %d)", msg, seg_idx);
+		fz_warn(ctx, "jbig2dec error: %s (segment %u)", msg, seg_idx);
 	else if (severity == JBIG2_SEVERITY_WARNING)
-		fz_warn(ctx, "jbig2dec warning: %s (segment %d)", msg, seg_idx);
-	return 0;
+		fz_warn(ctx, "jbig2dec warning: %s (segment %u)", msg, seg_idx);
 }
 
 static void *fz_jbig2_alloc(Jbig2Allocator *allocator, size_t size)
