diff --git a/meson.build b/meson.build
--- a/meson.build
+++ b/meson.build
@@ -9,10 +9,6 @@ cc = meson.get_compiler('c')
 fs = import('fs')
 pkg = import('pkgconfig')
 
-if get_option('default_library') == 'static'
-  add_project_arguments('-DUTF8PROC_STATIC', language: 'c')
-endif
-
 add_project_arguments('-DUTF8PROC_EXPORTS', language: 'c')
 
 utf8proc_lib = library('utf8proc',
@@ -23,6 +19,7 @@ utf8proc_lib = library('utf8proc',
 )
 
 utf8proc_dep = declare_dependency(
+  compile_args: '-DUTF8PROC_EXPORTS',
   include_directories: include_directories('.'),
   link_with: utf8proc_lib
 )
